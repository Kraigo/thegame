"use strict";function _classCallCheck(s,y){if(!(s instanceof y))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(s,y){if(!(s instanceof y))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(s,y){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?s:y}function _inherits(s,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function, not "+typeof y);s.prototype=Object.create(y&&y.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(s,y):s.__proto__=y)}function _classCallCheck(s,y){if(!(s instanceof y))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(s,y){if(!(s instanceof y))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(s,y){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?s:y}function _inherits(s,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function, not "+typeof y);s.prototype=Object.create(y&&y.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(s,y):s.__proto__=y)}function _classCallCheck(s,y){if(!(s instanceof y))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(s,y){if(!(s instanceof y))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(s,y){if(!(s instanceof y))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(s,y){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?s:y}function _inherits(s,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function, not "+typeof y);s.prototype=Object.create(y&&y.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(s,y):s.__proto__=y)}function _classCallCheck(s,y){if(!(s instanceof y))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(s,y){if(!(s instanceof y))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(s,y){if(!(s instanceof y))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function s(s,y){for(var x=0;x<y.length;x++){var t=y[x];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}return function(y,x,t){return x&&s(y.prototype,x),t&&s(y,t),y}}(),Basis=function(){function s(y){_classCallCheck(this,s),this.game=y,this.size={width:16,height:16,radius:16},this.position={x:0,y:0},this.direction={x:0,y:0},this.speed=0,this.velocity=0,this.gravity=.5,this.animation={name:null,state:"stand",keyframe:0,rate:5,end:!1},this.health={max:100,current:100},this.attack={damageMin:1,damageMax:2,range:0},this.willDie=!1,this.willAttack=!1}return _createClass(s,[{key:"render",value:function(){this.game.screen.beginPath(),this.game.screen.rect(this.position.x-this.game.camera.x,this.position.y-this.game.camera.y,this.size.width,this.size.height),this.game.screen.stroke()}},{key:"healthBar",value:function y(){var y={x:this.position.x-this.game.camera.x,y:this.position.y-this.game.camera.y-5,height:3,width:this.size.width*(this.health.current/this.health.max)};this.game.screen.beginPath(),this.game.screen.rect(y.x,y.y,this.size.width,y.height),this.game.screen.fillStyle="red",this.game.screen.fillRect(y.x,y.y,y.width,y.height),this.game.screen.stroke()}},{key:"update",value:function(){}},{key:"colliding",value:function(s,y){var x=s.x-y.x,t=s.y-y.y,i=Math.sqrt(x*x+t*t);return i<s.r+y.r}},{key:"collidingSqr",value:function(s,y){return!(s==y||s.position.x+s.size.width<y.position.x||s.position.y+s.size.height<y.position.y||s.position.x>y.position.x+y.size.width||s.position.y>y.position.y+y.size.height)}},{key:"collidingBody",value:function(s,y){return s!=y&&this.colliding({x:s.position.x,y:s.position.y,r:s.size.width/2},{x:y.position.x,y:y.position.y,r:y.size.width/2})}},{key:"brotherColliding",value:function(){for(var s,y=this.constructor,x=.03,t=0;t<this.game.bodies.length;t++)if(s=this.game.bodies[t],s instanceof y&&this.collidingBody(this,s)){if(this.position.x<s.position.x){var i=(this.position.x+this.size.width-s.position.x)/2*x;this.position.x-=i,s.position.x+=i}else if(this.position.x>s.position.x){var i=(s.position.x-this.position.x+this.size.width)/2*x;this.position.x+=i,s.position.x-=i}if(this.position.y<s.position.y){var i=(this.position.y+this.size.height-s.position.y)/2*x;this.position.y-=i,s.position.y+=i}else if(this.position.y>s.position.y){var i=(s.position.y-this.position.y+this.size.height)/2*x;this.position.y+=i,s.position.y-=i}}}},{key:"bounceWorld",value:function(){(this.position.x+this.size.width>this.game.world.width||this.position.x<0)&&(this.direction.x=-this.direction.x),(this.position.y+this.size.height>this.game.world.height||this.position.y<0)&&(this.direction.y=-this.direction.y)}},{key:"isOuterWorld",value:function(){return!(this.position.x>-this.size.width&&this.position.x<this.game.world.width&&this.position.y>-this.size.height&&this.position.y<this.game.world.height)}},{key:"fixStuckWorld",value:function(){this.position.x<0?(this.position.x=0,this.direction.x<0&&(this.direction.x=-this.direction.x)):this.position.x+this.size.width>this.game.world.width&&(this.position.x=this.game.world.width-this.size.width,this.direction.x>0&&(this.direction.x=-this.direction.x)),this.position.y<0?(this.position.y=0,this.direction.y<0&&(this.direction.y=-this.direction.y)):this.position.y+this.size.height>this.game.world.height&&(this.position.y=this.game.world.height-this.size.height,this.direction.y>0&&(this.direction.y=-this.direction.y))}},{key:"vectorNormalize",value:function(s,y){var x=y.x+this.game.camera.x-s.x-this.size.width/2,t=y.y+this.game.camera.y-s.y-this.size.height/2,i=Math.sqrt(x*x+t*t);return{x:x/i,y:t/i}}},{key:"vectorAngle",value:function(s,y){Math.atan2(y.y-s.y,y.x-s.x);return 180*Math.atan2(y.y-s.y,y.x-s.x)/Math.PI}},{key:"getRandomInt",value:function(s,y){return Math.floor(Math.random()*(y-s+1))+s}},{key:"changeAnimation",value:function(s){this.animation.state!=s&&(this.animation.state=s,this.animation.keyframe=0,this.animation.end=!1)}},{key:"kill",value:function(){this.willDie=!0,this.changeAnimation("die")}},{key:"hit",value:function(s){this.health.current-=s,this.health.current<=0&&(this.health.current=0,this.kill())}},{key:"isReach",value:function(s){return this!=s&&this.colliding({x:this.position.x,y:this.position.y,r:this.size.width/2},{x:s.position.x,y:s.position.y,r:this.attack.range+this.size.width/2})}}]),s}(),_createClass=function(){function s(s,y){for(var x=0;x<y.length;x++){var t=y[x];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}return function(y,x,t){return x&&s(y.prototype,x),t&&s(y,t),y}}(),Asteroid=function(s){function y(s,x){_classCallCheck(this,y);var t=_possibleConstructorReturn(this,Object.getPrototypeOf(y).call(this,s));return t.size={width:x.width,height:x.height},t.position={x:x.x||Math.floor(Math.random()*(t.game.world.width-t.size.width)),y:x.y||Math.floor(Math.random()*(t.game.world.height-t.size.height))},t.direction={x:Math.random(),y:Math.random()},t.attack.range=5,t.speed=2*Math.random(),t.speed=3,t.animation.name="monster",t.target=x.target||null,t}return _inherits(y,s),_createClass(y,[{key:"render",value:function(){this.game.screen.beginPath(),this.game.screen.arc(this.position.x+this.size.width/2-this.game.camera.x,this.position.y+this.size.height/2-this.game.camera.y,(this.size.width+this.size.height)/6,0,2*Math.PI),this.game.screen.fillStyle="rgba(0,0,0,0.2)",this.game.screen.fill();var s=this.vectorAngle({x:this.position.x-this.game.camera.x,y:this.position.y-this.game.camera.y},{x:this.position.x-this.game.camera.x+this.direction.x,y:this.position.y-this.game.camera.y+this.direction.y});this.game.sprite.draw(this,s),this.healthBar()}},{key:"update",value:function(){this.bounceWorld(),this.brotherColliding(),this.fixStuckWorld(),this.willDie||(this.willAttack||this.isReach(this.target)?(this.willAttack=!0,this.changeAnimation("attack"),this.animation.end&&(this.willAttack=!1,this.isReach(this.target)&&(console.log("hit you"),this.target.hit(this.getRandomInt(this.attack.damageMin,this.attack.damageMax))),this.changeAnimation("stand"))):this.speed?(this.changeAnimation("walk"),this.position.x+=this.direction.x*this.speed,this.position.y+=this.direction.y*this.speed,this.target&&this.routeToTarget()):this.changeAnimation("stand"))}},{key:"routeToTarget",value:function(){var s=this.vectorNormalize(this.position,{x:this.target.position.x-this.game.camera.x+this.target.size.width/2,y:this.target.position.y-this.game.camera.y+this.target.size.height/2});this.direction.x+=.05*(s.x-this.direction.x),this.direction.y+=.05*(s.y-this.direction.y)}}]),y}(Basis),_createClass=function(){function s(s,y){for(var x=0;x<y.length;x++){var t=y[x];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}return function(y,x,t){return x&&s(y.prototype,x),t&&s(y,t),y}}(),Builder=function(){function s(y){_classCallCheck(this,s),this.game=y,this.size={width:24,height:24},this.position={x:0,y:0,sx:0,sy:0},this.speed=3}return _createClass(s,[{key:"update",value:function(){this.position.sx=this.game.point.x+this.game.camera.x-(this.game.point.x+this.game.camera.x)%this.size.width,this.position.sy=this.game.point.y+this.game.camera.y-(this.game.point.y+this.game.camera.y)%this.size.width,this.move()}},{key:"render",value:function(){this.game.screen.beginPath(),this.game.screen.rect(this.position.sx-this.game.camera.x,this.position.sy-this.game.camera.y,this.size.width,this.size.height),this.game.screen.stroke()}},{key:"move",value:function(){var s=this.position.sx,y=this.position.sy;this.game.keyboard.isPressed("A")?this.position.x-=this.speed:this.game.keyboard.isPressed("D")&&(this.position.x+=this.speed),this.game.keyboard.isPressed("W")?this.position.y-=this.speed:this.game.keyboard.isPressed("S")&&(this.position.y+=this.speed),this.game.keyboard.isPressed("F")&&(this.game.keyboard.isPressed("1")?this.game.stage.build(["floor_1",s,y]):this.game.keyboard.isPressed("2")?this.game.stage.build(["floor_2",s,y]):this.game.keyboard.isPressed("3")?this.game.stage.build(["floor_3",s,y]):this.game.keyboard.isPressed("4")?this.game.stage.build(["floor_4",s,y]):this.game.keyboard.isPressed("5")?this.game.stage.build(["floor_5",s,y]):this.game.keyboard.isPressed("6")?this.game.stage.build(["floor_6",s,y]):this.game.keyboard.isPressed("7")?this.game.stage.build(["floor_7",s,y]):this.game.keyboard.isPressed("8")?this.game.stage.build(["floor_8",s,y]):this.game.keyboard.isPressed("9")&&this.game.stage.build(["floor_9",s,y])),this.game.keyboard.isPressed("C")&&this.game.stage.clean()}}]),s}(),_createClass=function(){function s(s,y){for(var x=0;x<y.length;x++){var t=y[x];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}return function(y,x,t){return x&&s(y.prototype,x),t&&s(y,t),y}}(),Bullet=function(s){function y(s,x){_classCallCheck(this,y);var t=_possibleConstructorReturn(this,Object.getPrototypeOf(y).call(this,s));return t.size.width=24,t.size.height=24,t.position.x=x.x-t.size.width/2,t.position.y=x.y-t.size.height/2,t.direction=x.direction,t.speed=5,t.animation.name="bullet",t.attack.damage=x.damage,t}return _inherits(y,s),_createClass(y,[{key:"update",value:function(){this.bounceWorld(),this.fixStuckWorld(),this.isOuterWorld()&&this.game.removeBody(this);for(var s,y=0;y<this.game.bodies.length;y++)s=this.game.bodies[y],!this.willDie&&!s.willDie&&s instanceof Asteroid&&this.collidingBody(this,s)&&(this.kill(),s.hit(this.attack.damage));this.position.x+=this.direction.x*this.speed,this.position.y+=this.direction.y*this.speed}},{key:"render",value:function(){var s=this.vectorAngle({x:this.position.x-this.game.camera.x,y:this.position.y-this.game.camera.y},{x:this.position.x-this.game.camera.x+this.direction.x*this.speed,y:this.position.y-this.game.camera.y+this.direction.y*this.speed});this.game.sprite.draw(this,s)}}]),y}(Basis),_createClass=function(){function s(s,y){for(var x=0;x<y.length;x++){var t=y[x];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}return function(y,x,t){return x&&s(y.prototype,x),t&&s(y,t),y}}(),Game=function(){function s(){_classCallCheck(this,s);var y=this;this.editMode=!1,this.canvas=document.createElement("canvas"),document.body.appendChild(this.canvas),this.canvas.width=document.body.offsetWidth-10,this.canvas.height=document.body.offsetHeight-10,this.screen=this.canvas.getContext("2d"),this.camera={x:0,y:0,width:this.canvas.width,height:this.canvas.height,target:null},this.world={width:1200,height:1200},this.player=new Player(y),this.builder=null,this.keyboard=new Keyboard,this.point=new Point(y.canvas),this.sprite=new Sprite(y),this.stage=new Stage(y),this.lastTick=new Date,this.timer=0,this.camera.target=this.player,this.bodies=[],this.addBody(this.player);for(var x=0;5>x;x++)y.addBody(new Asteroid(y,{target:y.player,width:48,height:48}));var t=function i(){y.update(),y.render(),requestAnimationFrame(i)};t(),this.modeToggler()}return _createClass(s,[{key:"render",value:function(){this.screen.clearRect(0,0,this.camera.width,this.camera.height);var s=new Date,y=Math.round(1e3/(s-this.lastTick));this.lastTick=s,this.stage.render(),this.debug(["FPS: "+y,"Obj count: "+this.bodies.length,"Stage count: "+this.stage.level.length,"Camera (x: "+this.camera.x.toFixed()+", y: "+this.camera.y.toFixed()+")","Player (x: "+this.player.position.x.toFixed()+", y: "+this.player.position.y.toFixed()+")"]),this.screen.rect(0-this.camera.x,0-this.camera.y,this.world.width,this.world.height),this.screen.stroke();for(var x,t=0;t<this.bodies.length;t++)x=this.bodies[t],this.isCameraShow(this.bodies[t])&&x.render()}},{key:"update",value:function(){this.timer++,this.camera.x=this.camera.target.position.x-this.camera.width/2+this.camera.target.size.width/2,this.camera.y=this.camera.target.position.y-this.camera.height/2+this.camera.target.size.height/2,this.camera.x+=.2*(this.point.x-this.camera.width/2),this.camera.y+=.2*(this.point.y-this.camera.height/2);for(var s,y=0;y<this.bodies.length;y++)s=this.bodies[y],s.willDie&&s.animation.end?(this.removeBody(s),y--):s.update()}},{key:"addBody",value:function(s){this.bodies.push(s)}},{key:"removeBody",value:function(s){Array.isArray(s)||(s=[s]);for(var y=0;y<s.length;y++)for(var x=0;x<this.bodies.length;x++)s[y]==this.bodies[x]&&(this.bodies.splice(x,1),x--)}},{key:"debug",value:function(s){this.screen.fillStyle="#000";for(var y=0;y<s.length;y++)this.screen.fillText(s[y],10,18*(y+1));this.screen.fillText("W",40,this.camera.height-40),this.screen.fillText("S",40,this.camera.height-20),this.screen.fillText("A",20,this.camera.height-20),this.screen.fillText("D",60,this.camera.height-20),this.screen.beginPath(),this.screen.moveTo(35,this.camera.height-55),this.screen.lineTo(55,this.camera.height-55),this.screen.lineTo(55,this.camera.height-35),this.screen.lineTo(75,this.camera.height-35),this.screen.lineTo(75,this.camera.height-15),this.screen.lineTo(15,this.camera.height-15),this.screen.lineTo(15,this.camera.height-35),this.screen.lineTo(35,this.camera.height-35),this.screen.lineTo(35,this.camera.height-55),this.screen.stroke()}},{key:"isCameraShow",value:function(s){return!(s.position.x+s.size.width<this.camera.x&&s.position.x>this.camera.width&&s.position.y+s.size.height<this.camera.y&&s.position.y>this.camera.width)}},{key:"modeToggler",value:function(){var s=this;document.addEventListener("keydown",function(y){113==y.keyCode&&(s.builder=new Builder(s),s.camera.target=s.builder,s.bodies=[],s.addBody(s.builder))})}}]),s}(),Keyboard=function s(){_classCallCheck(this,s);var y={},x={SPACE:32,A:65,W:87,D:68,S:83,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,F:70,C:67,F2:113,LEFT:37,UP:38,RIGHT:39,DOWN:40};document.addEventListener("keydown",function(s){s.preventDefault(),y[s.keyCode]=!0}),document.addEventListener("keyup",function(s){y[s.keyCode]=!1}),this.isPressed=function(s){return s=s.toUpperCase(),y[x[s]]}},_createClass=function(){function s(s,y){for(var x=0;x<y.length;x++){var t=y[x];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}return function(y,x,t){return x&&s(y.prototype,x),t&&s(y,t),y}}(),Player=function(s){function y(s){_classCallCheck(this,y);var x=_possibleConstructorReturn(this,Object.getPrototypeOf(y).call(this,s));return x.acceleration={x:3,y:3},x.size.width=48,x.size.height=48,x.position.x=s.world.width/2-x.size.width/2,x.position.y=s.world.height/2-x.size.height/2,x.shooting={bullet:1,rate:3,reload:0},x.attack={damageMin:20,damageMax:50,range:10},x.animation.name="player",x}return _inherits(y,s),_createClass(y,[{key:"render",value:function(){this.game.screen.beginPath(),this.game.screen.arc(this.position.x+this.size.width/2-this.game.camera.x,this.position.y+this.size.height/2-this.game.camera.y,(this.size.width+this.size.height)/6,0,2*Math.PI),this.game.screen.fillStyle="rgba(0,0,0,0.2)",this.game.screen.fill();var s=this.vectorAngle({x:this.position.x-this.game.camera.x+this.size.width/2,y:this.position.y-this.game.camera.y+this.size.width/2},{x:this.game.point.x,y:this.game.point.y});this.game.sprite.draw(this,s),this.healthBar()}},{key:"update",value:function(){this.shot(),this.move()}},{key:"move",value:function(){this.game.keyboard.isPressed("A")&&this.position.x>0?this.position.x-=this.acceleration.x:this.game.keyboard.isPressed("D")&&this.position.x+this.size.width<this.game.world.width&&(this.position.x+=this.acceleration.x),this.game.keyboard.isPressed("W")&&this.position.y>0?this.position.y-=this.acceleration.y:this.game.keyboard.isPressed("S")&&this.position.y+this.size.height<this.game.world.height&&(this.position.y+=this.acceleration.y),this.game.keyboard.isPressed("W")||this.game.keyboard.isPressed("S")||this.game.keyboard.isPressed("A")||this.game.keyboard.isPressed("D")?this.changeAnimation("walk"):this.changeAnimation("stand")}},{key:"shot",value:function(){if(!this.shooting.bullet&&++this.shooting.reload>=60/this.shooting.rate&&(this.shooting.bullet=1,this.shooting.reload=0),this.shooting.bullet&&(this.game.point.isPressed("LEFT")||this.game.keyboard.isPressed("SPACE"))){this.shooting.bullet=0;var s={x:this.position.x+this.size.width/2,y:this.position.y+this.size.height/2,direction:this.vectorNormalize(this.position,this.game.point),damage:this.getRandomInt(this.attack.damageMin,this.attack.damageMax)};this.game.addBody(new Bullet(this.game,s))}}}]),y}(Basis),Point=function y(s){_classCallCheck(this,y);var x=this,t={},i={LEFT:0,RIGHT:2,MIDDLE:1};this.x=0,this.y=0,s.addEventListener("mousemove",function(s){x.x=s.clientX,x.y=s.clientY}),s.addEventListener("mousedown",function(s){t[s.button]=!0}),s.addEventListener("mouseup",function(s){s.preventDefault(),t[s.button]=!1}),this.isPressed=function(s){return s=s.toUpperCase(),t[i[s]]}},_createClass=function(){function s(s,y){for(var x=0;x<y.length;x++){var t=y[x];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}return function(y,x,t){return x&&s(y.prototype,x),t&&s(y,t),y}}(),Sprite=function(){function s(y){_classCallCheck(this,s),this.game=y,this.dir="sprites/sprite.png",this.image=new Image,this.image.src=this.dir,this.size={width:48,height:48},this.collection={player:{stand:[{x:0,y:0}],walk:[{x:0,y:0},{x:48,y:0},{x:96,y:0},{x:144,y:0},{x:0,y:48},{x:48,y:48},{x:96,y:48},{x:144,y:48}]},monster:{stand:[{x:0,y:144}],walk:[{x:0,y:144},{x:48,y:144},{x:96,y:144},{x:144,y:144},{x:0,y:192},{x:48,y:192},{x:96,y:192},{x:144,y:192}],bite:[{x:0,y:240},{x:48,y:240},{x:96,y:240}],attack:[{x:0,y:288},{x:48,y:288},{x:96,y:288},{x:144,y:288},{x:192,y:288}],die:[{x:0,y:336},{x:0,y:336},{x:48,y:336},{x:48,y:336}]},bullet:{stand:[{x:0,y:96,w:24,h:24}],die:[{x:0,y:120,w:24,h:24},{x:24,y:120,w:24,h:24}]}}}return _createClass(s,[{key:"draw",value:function(s,y){var x=s.position.x+s.size.width/2-this.game.camera.x,t=s.position.y+s.size.height/2-this.game.camera.y;y-=90;var i=this.getFrame(s.animation);this.game.screen.save(),this.game.screen.translate(x,t),this.game.screen.rotate(y*Math.PI/180),this.game.screen.drawImage(this.image,i.x,i.y,i.w||this.size.width,i.h||this.size.height,-s.size.width/2,-s.size.width/2,s.size.width,s.size.height),this.game.screen.translate(-x,-t),this.game.screen.rotate(-y*Math.PI/180),this.game.screen.restore()}},{key:"getFrame",value:function(s){var y=this.collection[s.name][s.state];return this.game.timer%s.rate==0&&(y.length-1>s.keyframe?s.keyframe+=1:(s.keyframe=0,s.end=!0)),y[s.keyframe]}}]),s}(),_createClass=function(){function s(s,y){for(var x=0;x<y.length;x++){var t=y[x];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}return function(y,x,t){return x&&s(y.prototype,x),t&&s(y,t),y}}(),Stage=function(){function s(y){_classCallCheck(this,s);this.game=y,this.dir="sprites/tileset.png",this.image=new Image,this.image.src=this.dir,this.current=1,this.size={width:24,height:24},this.cleaned=!0,this.level=[{sx:24,sy:96,x:48,y:408},{sx:24,sy:96,x:48,y:384},{sx:24,sy:96,x:48,y:360},{sx:24,sy:96,x:48,y:336},{sx:24,sy:96,x:24,y:408},{sx:24,sy:96,x:24,y:384},{sx:24,sy:96,x:24,y:360},{sx:24,sy:96,x:24,y:336},{sx:24,sy:96,x:24,y:312},{sx:24,sy:96,x:24,y:288},{sx:24,sy:96,x:24,y:264},{sx:24,sy:96,x:24,y:240},{sx:24,sy:96,x:24,y:216},{sx:24,sy:96,x:24,y:192},{sx:24,sy:96,x:24,y:168},{sx:24,sy:96,x:24,y:144},{sx:24,sy:96,x:24,y:120},{sx:24,sy:96,x:24,y:96},{sx:24,sy:96,x:24,y:72},{sx:24,sy:96,x:24,y:48},{sx:24,sy:96,x:24,y:24},{sx:24,sy:96,x:48,y:24},{sx:24,sy:96,x:72,y:24},{sx:24,sy:96,x:48,y:72},{sx:24,sy:96,x:48,y:96},{sx:24,sy:96,x:48,y:120},{sx:24,sy:96,x:48,y:144},{sx:24,sy:96,x:48,y:168},{sx:24,sy:96,x:48,y:192},{sx:24,sy:96,x:48,y:216},{sx:24,sy:96,x:48,y:240},{sx:24,sy:96,x:48,y:264},{sx:24,sy:96,x:48,y:288},{sx:24,sy:96,x:48,y:312},{sx:24,sy:96,x:72,y:312},{sx:24,sy:96,x:72,y:288},{sx:24,sy:96,x:72,y:168},{sx:24,sy:96,x:72,y:144},{sx:24,sy:96,x:72,y:120},{sx:24,sy:96,x:72,y:96},{sx:24,sy:96,x:72,y:72},{sx:24,sy:96,x:48,y:48},{sx:24,sy:96,x:72,y:48},{sx:24,sy:96,x:120,y:72},{sx:24,sy:96,x:120,y:96},{sx:24,sy:96,x:120,y:120},{sx:24,sy:96,x:120,y:144},{sx:24,sy:96,x:120,y:168},{sx:24,sy:96,x:120,y:264},{sx:24,sy:96,x:96,y:264},{sx:24,sy:96,x:72,y:264},{sx:24,sy:96,x:72,y:240},{sx:24,sy:96,x:72,y:216},{sx:24,sy:96,x:72,y:192},{sx:24,sy:96,x:96,y:240},{sx:24,sy:96,x:96,y:216},{sx:24,sy:96,x:96,y:192},{sx:24,sy:96,x:96,y:168},{sx:24,sy:96,x:96,y:144},{sx:24,sy:96,x:96,y:120},{sx:24,sy:96,x:96,y:96},{sx:24,sy:96,x:96,y:72},{sx:24,sy:96,x:96,y:48},{sx:24,sy:96,x:96,y:24},{sx:24,sy:96,x:144,y:24},{sx:24,sy:96,x:120,y:24},{sx:24,sy:96,x:120,y:48},{sx:24,sy:96,x:144,y:48},{sx:24,sy:96,x:144,y:72},{sx:24,sy:96,x:144,y:96},{sx:0,sy:96,x:0,y:24},{sx:0,sy:96,x:0,y:48},{sx:0,sy:96,x:0,y:72},{sx:0,sy:96,x:0,y:96},{sx:0,sy:96,x:0,y:120},{sx:0,sy:96,x:0,y:144},{sx:0,sy:96,x:0,y:168},{sx:0,sy:96,x:0,y:192},{sx:0,sy:96,x:0,y:216},{sx:0,sy:96,x:0,y:240},{sx:0,sy:96,x:0,y:264},{sx:0,sy:96,x:0,y:288},{sx:0,sy:96,x:0,y:312},{sx:0,sy:96,x:0,y:336},{sx:0,sy:96,x:0,y:360},{sx:0,sy:96,x:0,y:384},{sx:0,sy:96,x:0,y:408},{sx:0,sy:96,x:0,y:432},{sx:0,sy:96,x:0,y:456},{sx:0,sy:96,x:0,y:480},{sx:0,sy:96,x:0,y:504},{sx:0,sy:96,x:0,y:528},{sx:0,sy:96,x:0,y:552},{sx:0,sy:96,x:0,y:576},{sx:0,sy:96,x:0,y:600},{sx:0,sy:96,x:0,y:624},{sx:0,sy:96,x:0,y:648},{sx:0,sy:96,x:0,y:672},{sx:0,sy:96,x:0,y:696},{sx:0,sy:96,x:0,y:720},{sx:0,sy:96,x:0,y:744},{sx:0,sy:96,x:0,y:768},{sx:0,sy:96,x:0,y:792},{sx:0,sy:96,x:0,y:816},{sx:0,sy:96,x:0,y:840},{sx:0,sy:96,x:0,y:864},{sx:0,sy:96,x:0,y:888},{sx:0,sy:96,x:0,y:912},{sx:0,sy:96,x:0,y:936},{sx:0,sy:96,x:0,y:960},{sx:0,sy:96,x:0,y:984},{sx:0,sy:96,x:0,y:1008},{sx:0,sy:96,x:0,y:1032},{sx:0,sy:96,x:0,y:1056},{sx:0,sy:96,x:0,y:1080},{sx:0,sy:96,x:0,y:1104},{sx:0,sy:96,x:0,y:1128},{sx:0,sy:96,x:0,y:1152},{sx:0,sy:120,x:0,y:1176},{sx:24,sy:120,x:24,y:1176},{sx:24,sy:120,x:48,y:1176},{sx:24,sy:120,x:72,y:1176},{sx:24,sy:120,x:96,y:1176},{sx:24,sy:120,x:120,y:1176},{sx:24,sy:120,x:144,y:1176},{sx:24,sy:120,x:168,y:1176},{sx:24,sy:120,x:192,y:1176},{sx:24,sy:120,x:216,y:1176},{sx:24,sy:120,x:240,y:1176},{sx:24,sy:120,x:264,y:1176},{sx:24,sy:120,x:288,y:1176},{sx:24,sy:120,x:312,y:1176},{sx:24,sy:120,x:336,y:1176},{sx:24,sy:120,x:360,y:1176},{sx:24,sy:120,x:384,y:1176},{sx:24,sy:120,x:408,y:1176},{sx:24,sy:120,x:432,y:1176},{sx:24,sy:120,x:456,y:1176},{sx:24,sy:120,x:480,y:1176},{sx:24,sy:120,x:504,y:1176},{sx:24,sy:120,x:528,y:1176},{sx:24,sy:120,x:552,y:1176},{sx:24,sy:120,x:576,y:1176},{sx:24,sy:120,x:600,y:1176},{sx:24,sy:120,x:624,y:1176},{sx:24,sy:120,x:648,y:1176},{sx:24,sy:120,x:672,y:1176},{sx:24,sy:120,x:696,y:1176},{sx:24,sy:120,x:720,y:1176},{sx:24,sy:120,x:744,y:1176},{sx:24,sy:120,x:768,y:1176},{sx:24,sy:120,x:792,y:1176},{sx:24,sy:120,x:816,y:1176},{sx:24,sy:120,x:840,y:1176},{sx:24,sy:120,x:864,y:1176},{sx:24,sy:120,x:888,y:1176},{sx:24,sy:120,x:912,y:1176},{sx:24,sy:120,x:936,y:1176},{sx:24,sy:120,x:960,y:1176},{sx:24,sy:120,x:984,y:1176},{sx:24,sy:120,x:1008,y:1176},{sx:24,sy:120,x:1032,y:1176},{sx:24,sy:120,x:1056,y:1176},{sx:24,sy:120,x:1080,y:1176},{sx:24,sy:120,x:1104,y:1176},{sx:24,sy:120,x:1128,y:1176},{sx:24,sy:120,x:1152,y:1176},{sx:48,sy:120,x:1176,y:1176},{sx:48,sy:96,x:1176,y:1152},{sx:48,sy:96,x:1176,y:1128},{sx:48,sy:96,x:1176,y:1104},{sx:48,sy:96,x:1176,y:1080},{sx:48,sy:96,x:1176,y:1056},{sx:48,sy:96,x:1176,y:1032},{sx:48,sy:96,x:1176,y:1008},{sx:48,sy:96,x:1176,y:984},{sx:48,sy:96,x:1176,y:960},{sx:48,sy:96,x:1176,y:936},{sx:48,sy:96,x:1176,y:912},{sx:48,sy:96,x:1176,y:888},{sx:48,sy:96,x:1176,y:864},{sx:48,sy:96,x:1176,y:840},{sx:48,sy:96,x:1176,y:816},{sx:48,sy:96,x:1176,y:792},{sx:48,sy:96,x:1176,y:768},{sx:48,sy:96,x:1176,y:744},{sx:48,sy:96,x:1176,y:720},{sx:48,sy:96,x:1176,y:696},{sx:48,sy:96,x:1176,y:672},{sx:48,sy:96,x:1176,y:648},{sx:48,sy:96,x:1176,y:624},{sx:48,sy:96,x:1176,y:600},{sx:48,sy:96,x:1176,y:576},{sx:48,sy:96,x:1176,y:552},{sx:48,sy:96,x:1176,y:528},{sx:48,sy:96,x:1176,y:504},{sx:48,sy:96,x:1176,y:480},{sx:48,sy:96,x:1176,y:456},{sx:48,sy:96,x:1176,y:432},{sx:48,sy:96,x:1176,y:408},{sx:48,sy:96,x:1176,y:384},{sx:48,sy:96,x:1176,y:360},{sx:48,sy:96,x:1176,y:336},{sx:48,sy:96,x:1176,y:312},{sx:48,sy:96,x:1176,y:288},{sx:48,sy:96,x:1176,y:264},{sx:48,sy:96,x:1176,y:240},{sx:48,sy:96,x:1176,y:216},{sx:48,sy:96,x:1176,y:192},{sx:48,sy:96,x:1176,y:168},{sx:48,sy:96,x:1176,y:144},{sx:48,sy:96,x:1176,y:120},{sx:48,sy:96,x:1176,y:96},{sx:48,sy:96,x:1176,y:72},{sx:48,sy:96,x:1176,y:48},{sx:48,sy:96,x:1176,y:24},{sx:48,sy:72,x:1176,y:0},{sx:24,sy:72,x:1152,y:0},{sx:24,sy:72,x:1128,y:0},{sx:24,sy:72,x:1104,y:0},{sx:24,sy:72,x:1080,y:0},{sx:24,sy:72,x:1056,y:0},{sx:24,sy:72,x:1032,y:0},{sx:24,sy:72,x:1008,y:0},{sx:24,sy:72,x:984,y:0},{sx:24,sy:72,x:960,y:0},{sx:24,sy:72,x:936,y:0},{sx:24,sy:72,x:912,y:0},{sx:24,sy:72,x:888,y:0},{sx:24,sy:72,x:864,y:0},{sx:24,sy:72,x:840,y:0},{sx:24,sy:72,x:816,y:0},{sx:24,sy:72,x:792,y:0},{sx:24,sy:72,x:768,y:0},{sx:24,sy:72,x:744,y:0},{sx:24,sy:72,x:720,y:0},{sx:24,sy:72,x:696,y:0},{sx:24,sy:72,x:672,y:0},{sx:24,sy:72,x:648,y:0},{sx:24,sy:72,x:624,y:0},{sx:24,sy:72,x:600,y:0},{sx:24,sy:72,x:576,y:0},{sx:24,sy:72,x:552,y:0},{sx:24,sy:72,x:528,y:0},{sx:24,sy:72,x:504,y:0},{sx:24,sy:72,x:480,y:0},{sx:24,sy:72,x:456,y:0},{sx:24,sy:72,x:432,y:0},{sx:24,sy:72,x:408,y:0},{sx:24,sy:72,x:384,y:0},{sx:24,sy:72,x:360,y:0},{sx:24,sy:72,x:336,y:0},{sx:24,sy:72,x:312,y:0},{sx:24,sy:72,x:288,y:0},{sx:24,sy:72,x:264,y:0},{sx:24,sy:72,x:240,y:0},{sx:24,sy:72,x:216,y:0},{sx:24,sy:72,x:192,y:0},{sx:24,sy:72,x:168,y:0},{sx:24,sy:72,x:144,y:0},{sx:24,sy:72,x:120,y:0},{sx:24,sy:72,x:96,y:0},{sx:24,sy:72,x:72,y:0},{sx:24,sy:72,x:48,y:0},{sx:24,sy:72,x:24,y:0},{sx:0,sy:72,x:0,y:0},{sx:24,sy:96,x:168,y:24},{sx:24,sy:96,x:192,y:24},{sx:24,sy:96,x:216,y:24},{sx:24,sy:96,x:240,y:24},{sx:24,sy:96,x:264,y:24},{sx:24,sy:96,x:288,y:24},{sx:24,sy:96,x:312,y:24},{sx:24,sy:96,x:336,y:24},{sx:24,sy:96,x:360,y:24},{sx:24,sy:96,x:384,y:24},{sx:24,sy:96,x:408,y:24},{sx:24,sy:96,x:432,y:24},{sx:24,sy:96,x:456,y:24},{sx:24,sy:96,x:480,y:24},{sx:24,sy:96,x:504,y:24},{sx:24,sy:96,x:528,y:24},{sx:24,sy:96,x:552,y:24},{sx:24,sy:96,x:576,y:24},{sx:24,sy:96,x:600,y:24},{sx:24,sy:96,x:624,y:24},{sx:24,sy:96,x:648,y:24},{sx:24,sy:96,x:672,y:24},{sx:24,sy:96,x:696,y:24},{sx:24,sy:96,x:720,y:24},{sx:24,sy:96,x:744,y:24},{sx:24,sy:96,x:768,y:24},{sx:24,sy:96,x:792,y:24},{sx:24,sy:96,x:816,y:24},{sx:24,sy:96,x:840,y:24},{sx:24,sy:96,x:864,y:24},{sx:24,sy:96,x:888,y:24},{sx:24,sy:96,x:912,y:24},{sx:24,sy:96,x:936,y:24},{sx:24,sy:96,x:960,y:24},{sx:24,sy:96,x:984,y:24},{sx:24,sy:96,x:1008,y:24},{sx:24,sy:96,x:1032,y:24},{sx:24,sy:96,x:1056,y:24},{sx:24,sy:96,x:1080,y:24},{sx:24,sy:96,x:1104,y:24},{sx:24,sy:96,x:1128,y:24},{sx:24,sy:96,x:1128,y:48},{sx:24,sy:96,x:1152,y:24},{sx:24,sy:96,x:1152,y:48},{sx:24,sy:96,x:1152,y:72},{sx:24,sy:96,x:1152,y:96},{sx:24,sy:96,x:1152,y:120},{sx:24,sy:96,x:1152,y:144},{sx:24,sy:96,x:1152,y:168},{sx:24,sy:96,x:1152,y:192},{sx:24,sy:96,x:1152,y:216},{sx:24,sy:96,x:1152,y:240},{sx:24,sy:96,x:1152,y:264},{sx:24,sy:96,x:1152,y:288},{sx:24,sy:96,x:1152,y:312},{sx:24,sy:96,x:1152,y:336},{sx:24,sy:96,x:1152,y:360},{sx:24,sy:96,x:1152,y:384},{sx:24,sy:96,x:1152,y:408},{sx:24,sy:96,x:1152,y:432},{sx:24,sy:96,x:1152,y:456},{sx:24,sy:96,x:1152,y:480},{sx:24,sy:96,x:1152,y:504},{sx:24,sy:96,x:1152,y:528},{sx:24,sy:96,x:1152,y:552},{sx:24,sy:96,x:1152,y:576},{sx:24,sy:96,x:1152,y:600},{sx:24,sy:96,x:1152,y:624},{sx:24,sy:96,x:1152,y:648},{sx:24,sy:96,x:1152,y:672},{sx:24,sy:96,x:1152,y:696},{sx:24,sy:96,x:1152,y:720},{sx:24,sy:96,x:1152,y:744},{sx:24,sy:96,x:1152,y:768},{sx:24,sy:96,x:1152,y:792},{sx:24,sy:96,x:1152,y:816},{sx:24,sy:96,x:1152,y:840},{sx:24,sy:96,x:1152,y:864},{sx:24,sy:96,x:1152,y:888},{sx:24,sy:96,x:1152,y:912},{sx:24,sy:96,x:1128,y:912},{sx:24,sy:96,x:1104,y:912},{sx:24,sy:96,x:1080,y:912},{sx:24,sy:96,x:1056,y:912},{sx:24,sy:96,x:1032,y:912},{sx:24,sy:96,x:1008,y:912},{sx:24,sy:96,x:984,y:912},{sx:24,sy:96,x:960,y:912},{sx:24,sy:96,x:936,y:912},{sx:24,sy:96,x:912,y:912},{sx:24,sy:96,x:888,y:912},{sx:24,sy:96,x:864,y:912},{sx:24,sy:96,x:840,y:912},{sx:24,sy:96,x:792,y:888},{sx:24,sy:96,x:768,y:888},{sx:24,sy:96,x:768,y:864},{sx:24,sy:96,x:744,y:864},{sx:24,sy:96,x:744,y:840},{sx:24,sy:96,x:720,y:840},{sx:24,sy:96,x:720,y:816},{sx:24,sy:96,x:696,y:816},{sx:24,sy:96,x:696,y:792},{sx:24,sy:96,x:672,y:792},{sx:24,sy:96,x:672,y:768},{sx:24,sy:96,x:648,y:768},{sx:24,sy:96,x:648,y:744},{sx:24,sy:96,x:600,y:720},{sx:24,sy:96,x:600,y:696},{sx:24,sy:96,x:576,y:696},{sx:24,sy:96,x:576,y:672},{sx:24,sy:96,x:552,y:672},{sx:24,sy:96,x:552,y:648},{sx:24,sy:96,x:528,y:648},{sx:24,sy:96,x:528,y:624},{sx:24,sy:96,x:504,y:624},{sx:24,sy:96,x:504,y:600},{sx:24,sy:96,x:480,y:600},{sx:24,sy:96,x:480,y:576},{sx:24,sy:96,x:456,y:576},{sx:24,sy:96,x:456,y:552},{sx:24,sy:96,x:432,y:552},{sx:24,sy:96,x:432,y:528},{sx:24,sy:96,x:408,y:528},{sx:24,sy:96,x:408,y:504},{sx:24,sy:96,x:384,y:504},{sx:24,sy:96,x:384,y:480},{sx:24,sy:96,x:360,y:480},{sx:24,sy:96,x:360,y:456},{sx:24,sy:96,x:336,y:456},{sx:24,sy:96,x:336,y:432},{sx:24,sy:96,x:312,y:432},{sx:24,sy:96,x:312,y:408},{sx:24,sy:96,x:288,y:408},{sx:24,
sy:96,x:288,y:384},{sx:24,sy:96,x:264,y:384},{sx:24,sy:96,x:264,y:360},{sx:24,sy:96,x:240,y:360},{sx:24,sy:96,x:240,y:336},{sx:24,sy:96,x:216,y:336},{sx:24,sy:96,x:216,y:312},{sx:24,sy:96,x:192,y:312},{sx:24,sy:96,x:192,y:288},{sx:24,sy:96,x:168,y:288},{sx:24,sy:96,x:168,y:264},{sx:24,sy:96,x:144,y:264},{sx:24,sy:96,x:144,y:240},{sx:24,sy:96,x:120,y:240},{sx:24,sy:96,x:120,y:216},{sx:24,sy:96,x:120,y:192},{sx:24,sy:96,x:168,y:48},{sx:24,sy:96,x:192,y:48},{sx:24,sy:96,x:216,y:48},{sx:24,sy:96,x:240,y:48},{sx:24,sy:96,x:264,y:48},{sx:24,sy:96,x:288,y:48},{sx:24,sy:96,x:288,y:72},{sx:24,sy:96,x:312,y:72},{sx:24,sy:96,x:312,y:96},{sx:24,sy:96,x:336,y:96},{sx:24,sy:96,x:336,y:120},{sx:24,sy:96,x:360,y:120},{sx:24,sy:96,x:360,y:144},{sx:24,sy:96,x:384,y:144},{sx:24,sy:96,x:384,y:168},{sx:24,sy:96,x:408,y:168},{sx:24,sy:96,x:408,y:192},{sx:24,sy:96,x:432,y:192},{sx:24,sy:96,x:432,y:216},{sx:24,sy:96,x:456,y:216},{sx:24,sy:96,x:456,y:240},{sx:24,sy:96,x:480,y:240},{sx:24,sy:96,x:480,y:264},{sx:24,sy:96,x:504,y:264},{sx:24,sy:96,x:504,y:288},{sx:24,sy:96,x:528,y:288},{sx:24,sy:96,x:528,y:312},{sx:24,sy:96,x:552,y:312},{sx:24,sy:96,x:552,y:336},{sx:24,sy:96,x:576,y:336},{sx:24,sy:96,x:576,y:360},{sx:24,sy:96,x:600,y:360},{sx:24,sy:96,x:600,y:384},{sx:24,sy:96,x:624,y:384},{sx:24,sy:96,x:648,y:384},{sx:24,sy:96,x:648,y:360},{sx:24,sy:96,x:672,y:360},{sx:24,sy:96,x:672,y:336},{sx:24,sy:96,x:696,y:336},{sx:24,sy:96,x:696,y:312},{sx:24,sy:96,x:720,y:312},{sx:24,sy:96,x:720,y:288},{sx:24,sy:96,x:744,y:288},{sx:24,sy:96,x:744,y:264},{sx:24,sy:96,x:792,y:240},{sx:24,sy:96,x:792,y:216},{sx:24,sy:96,x:816,y:216},{sx:24,sy:96,x:816,y:192},{sx:24,sy:96,x:840,y:192},{sx:24,sy:96,x:840,y:168},{sx:24,sy:96,x:864,y:168},{sx:24,sy:96,x:864,y:144},{sx:24,sy:96,x:888,y:144},{sx:24,sy:96,x:912,y:96},{sx:24,sy:96,x:936,y:96},{sx:24,sy:96,x:936,y:72},{sx:24,sy:96,x:960,y:72},{sx:24,sy:96,x:984,y:72},{sx:24,sy:96,x:1032,y:120},{sx:24,sy:96,x:1032,y:144},{sx:24,sy:96,x:1056,y:168},{sx:24,sy:96,x:1080,y:168},{sx:24,sy:96,x:1080,y:192},{sx:24,sy:96,x:1104,y:216},{sx:24,sy:96,x:1128,y:216},{sx:24,sy:96,x:1128,y:240},{sx:24,sy:96,x:1104,y:240},{sx:24,sy:96,x:1080,y:288},{sx:24,sy:96,x:1056,y:288},{sx:24,sy:96,x:1056,y:312},{sx:24,sy:96,x:1032,y:312},{sx:24,sy:96,x:1032,y:336},{sx:24,sy:96,x:1008,y:336},{sx:24,sy:96,x:1008,y:360},{sx:24,sy:96,x:984,y:360},{sx:24,sy:96,x:984,y:384},{sx:24,sy:96,x:960,y:384},{sx:24,sy:96,x:960,y:408},{sx:24,sy:96,x:912,y:432},{sx:24,sy:96,x:912,y:456},{sx:24,sy:96,x:888,y:456},{sx:24,sy:96,x:888,y:480},{sx:24,sy:96,x:864,y:480},{sx:24,sy:96,x:864,y:504},{sx:24,sy:96,x:840,y:504},{sx:24,sy:96,x:840,y:528},{sx:24,sy:96,x:816,y:528},{sx:24,sy:96,x:816,y:552},{sx:24,sy:96,x:792,y:552},{sx:24,sy:96,x:792,y:576},{sx:24,sy:96,x:768,y:576},{sx:24,sy:96,x:768,y:600},{sx:24,sy:96,x:744,y:600},{sx:24,sy:96,x:744,y:624},{sx:24,sy:96,x:720,y:624},{sx:24,sy:96,x:720,y:648},{sx:24,sy:96,x:696,y:648},{sx:24,sy:96,x:696,y:672},{sx:24,sy:96,x:672,y:672},{sx:24,sy:96,x:672,y:696},{sx:24,sy:96,x:648,y:696},{sx:24,sy:96,x:648,y:720},{sx:24,sy:96,x:624,y:720},{sx:24,sy:96,x:624,y:744},{sx:24,sy:96,x:600,y:744},{sx:24,sy:96,x:600,y:768},{sx:24,sy:96,x:576,y:768},{sx:24,sy:96,x:576,y:792},{sx:24,sy:96,x:552,y:792},{sx:24,sy:96,x:552,y:816},{sx:24,sy:96,x:528,y:816},{sx:24,sy:96,x:528,y:840},{sx:24,sy:96,x:504,y:840},{sx:24,sy:96,x:504,y:864},{sx:24,sy:96,x:480,y:864},{sx:24,sy:96,x:480,y:888},{sx:24,sy:96,x:456,y:888},{sx:24,sy:96,x:456,y:912},{sx:24,sy:96,x:432,y:912},{sx:24,sy:96,x:432,y:936},{sx:24,sy:96,x:408,y:936},{sx:24,sy:96,x:384,y:984},{sx:24,sy:96,x:360,y:984},{sx:24,sy:96,x:360,y:1008},{sx:24,sy:96,x:336,y:1008},{sx:24,sy:96,x:336,y:1032},{sx:24,sy:96,x:312,y:1032},{sx:24,sy:96,x:312,y:1056},{sx:24,sy:96,x:288,y:1056},{sx:24,sy:96,x:288,y:1080},{sx:24,sy:96,x:264,y:1080},{sx:24,sy:96,x:312,y:48},{sx:24,sy:96,x:336,y:48},{sx:24,sy:96,x:360,y:48},{sx:24,sy:96,x:384,y:48},{sx:24,sy:96,x:408,y:48},{sx:24,sy:96,x:432,y:48},{sx:24,sy:96,x:456,y:48},{sx:24,sy:96,x:480,y:48},{sx:24,sy:96,x:504,y:48},{sx:24,sy:96,x:528,y:48},{sx:24,sy:96,x:552,y:48},{sx:24,sy:96,x:576,y:48},{sx:24,sy:96,x:600,y:48},{sx:24,sy:96,x:624,y:48},{sx:24,sy:96,x:648,y:48},{sx:24,sy:96,x:672,y:48},{sx:24,sy:96,x:696,y:48},{sx:24,sy:96,x:720,y:48},{sx:24,sy:96,x:744,y:48},{sx:24,sy:96,x:768,y:48},{sx:24,sy:96,x:792,y:48},{sx:24,sy:96,x:816,y:48},{sx:24,sy:96,x:840,y:48},{sx:24,sy:96,x:864,y:48},{sx:24,sy:96,x:888,y:48},{sx:24,sy:96,x:912,y:48},{sx:24,sy:96,x:936,y:48},{sx:24,sy:96,x:960,y:48},{sx:24,sy:96,x:984,y:48},{sx:24,sy:96,x:1056,y:48},{sx:24,sy:96,x:1080,y:48},{sx:24,sy:96,x:1104,y:48},{sx:24,sy:96,x:1104,y:96},{sx:24,sy:96,x:1128,y:96},{sx:24,sy:96,x:1128,y:120},{sx:24,sy:96,x:1128,y:144},{sx:24,sy:96,x:1128,y:168},{sx:24,sy:96,x:1128,y:192},{sx:24,sy:96,x:1104,y:192},{sx:24,sy:96,x:1104,y:168},{sx:24,sy:96,x:1104,y:144},{sx:24,sy:96,x:1104,y:120},{sx:24,sy:96,x:1032,y:48},{sx:24,sy:96,x:1008,y:48},{sx:24,sy:96,x:1008,y:72},{sx:24,sy:96,x:1032,y:72},{sx:24,sy:96,x:1080,y:96},{sx:24,sy:96,x:1080,y:120},{sx:24,sy:96,x:1080,y:144},{sx:24,sy:96,x:1056,y:144},{sx:24,sy:96,x:1056,y:120},{sx:24,sy:96,x:1032,y:96},{sx:24,sy:96,x:1008,y:96},{sx:24,sy:96,x:984,y:96},{sx:24,sy:96,x:960,y:96},{sx:24,sy:96,x:960,y:120},{sx:24,sy:96,x:960,y:144},{sx:24,sy:96,x:1008,y:144},{sx:24,sy:96,x:1008,y:120},{sx:24,sy:96,x:984,y:120},{sx:24,sy:96,x:984,y:144},{sx:24,sy:96,x:984,y:168},{sx:24,sy:96,x:984,y:192},{sx:24,sy:96,x:1032,y:192},{sx:24,sy:96,x:1032,y:168},{sx:24,sy:96,x:1008,y:168},{sx:24,sy:96,x:1008,y:192},{sx:24,sy:96,x:1008,y:216},{sx:24,sy:96,x:1032,y:216},{sx:24,sy:96,x:1080,y:216},{sx:24,sy:96,x:1056,y:192},{sx:24,sy:96,x:1056,y:216},{sx:24,sy:96,x:1056,y:240},{sx:24,sy:96,x:1080,y:240},{sx:24,sy:96,x:1080,y:264},{sx:24,sy:96,x:1104,y:264},{sx:24,sy:96,x:1128,y:264},{sx:24,sy:96,x:1128,y:288},{sx:24,sy:96,x:1104,y:288},{sx:24,sy:96,x:1104,y:312},{sx:24,sy:96,x:1128,y:312},{sx:24,sy:96,x:1128,y:336},{sx:24,sy:96,x:1104,y:336},{sx:24,sy:96,x:1080,y:312},{sx:24,sy:96,x:1080,y:336},{sx:24,sy:96,x:1080,y:360},{sx:24,sy:96,x:1056,y:360},{sx:24,sy:96,x:1056,y:336},{sx:24,sy:96,x:1080,y:408},{sx:24,sy:96,x:1104,y:384},{sx:24,sy:96,x:1104,y:360},{sx:24,sy:96,x:1128,y:360},{sx:24,sy:96,x:1128,y:384},{sx:24,sy:96,x:1128,y:408},{sx:24,sy:96,x:1128,y:432},{sx:24,sy:96,x:1128,y:456},{sx:24,sy:96,x:1128,y:480},{sx:24,sy:96,x:1128,y:504},{sx:24,sy:96,x:1128,y:528},{sx:24,sy:96,x:1128,y:552},{sx:24,sy:96,x:1128,y:576},{sx:24,sy:96,x:1128,y:600},{sx:24,sy:96,x:1128,y:624},{sx:24,sy:96,x:1128,y:648},{sx:24,sy:96,x:1128,y:672},{sx:24,sy:96,x:1128,y:696},{sx:24,sy:96,x:1128,y:720},{sx:24,sy:96,x:1128,y:744},{sx:24,sy:96,x:1128,y:768},{sx:24,sy:96,x:1128,y:792},{sx:24,sy:96,x:1128,y:816},{sx:24,sy:96,x:1128,y:840},{sx:24,sy:96,x:1128,y:864},{sx:24,sy:96,x:1128,y:888},{sx:24,sy:96,x:1104,y:888},{sx:24,sy:96,x:1080,y:888},{sx:24,sy:96,x:1056,y:888},{sx:24,sy:96,x:1032,y:888},{sx:24,sy:96,x:1008,y:888},{sx:24,sy:96,x:984,y:888},{sx:24,sy:96,x:960,y:888},{sx:24,sy:96,x:936,y:888},{sx:24,sy:96,x:912,y:888},{sx:24,sy:96,x:888,y:888},{sx:24,sy:96,x:864,y:888},{sx:24,sy:96,x:696,y:768},{sx:24,sy:96,x:672,y:744},{sx:24,sy:96,x:672,y:720},{sx:24,sy:96,x:696,y:720},{sx:24,sy:96,x:744,y:720},{sx:24,sy:96,x:744,y:696},{sx:24,sy:96,x:768,y:696},{sx:24,sy:96,x:768,y:672},{sx:24,sy:96,x:792,y:672},{sx:24,sy:96,x:792,y:648},{sx:24,sy:96,x:816,y:648},{sx:24,sy:96,x:816,y:624},{sx:24,sy:96,x:840,y:624},{sx:24,sy:96,x:840,y:600},{sx:24,sy:96,x:864,y:600},{sx:24,sy:96,x:864,y:576},{sx:24,sy:96,x:888,y:576},{sx:24,sy:96,x:888,y:552},{sx:24,sy:96,x:912,y:552},{sx:24,sy:96,x:912,y:528},{sx:24,sy:96,x:936,y:528},{sx:24,sy:96,x:936,y:504},{sx:24,sy:96,x:960,y:504},{sx:24,sy:96,x:960,y:480},{sx:24,sy:96,x:1008,y:456},{sx:24,sy:96,x:1008,y:432},{sx:24,sy:96,x:1032,y:432},{sx:24,sy:96,x:1032,y:408},{sx:24,sy:96,x:1056,y:408},{sx:24,sy:96,x:1056,y:384},{sx:24,sy:96,x:1080,y:384},{sx:24,sy:96,x:1104,y:456},{sx:24,sy:96,x:1104,y:480},{sx:24,sy:96,x:1104,y:504},{sx:24,sy:96,x:1104,y:528},{sx:24,sy:96,x:1104,y:552},{sx:24,sy:96,x:1104,y:576},{sx:24,sy:96,x:1104,y:600},{sx:24,sy:96,x:1104,y:624},{sx:24,sy:96,x:1104,y:648},{sx:24,sy:96,x:1104,y:672},{sx:24,sy:96,x:1104,y:696},{sx:24,sy:96,x:1104,y:720},{sx:24,sy:96,x:1104,y:744},{sx:24,sy:96,x:1104,y:768},{sx:24,sy:96,x:1104,y:792},{sx:24,sy:96,x:1104,y:816},{sx:24,sy:96,x:1104,y:840},{sx:24,sy:96,x:1104,y:864},{sx:24,sy:96,x:1080,y:864},{sx:24,sy:96,x:1056,y:864},{sx:24,sy:96,x:1032,y:864},{sx:24,sy:96,x:1008,y:864},{sx:24,sy:96,x:984,y:864},{sx:24,sy:96,x:960,y:864},{sx:24,sy:96,x:936,y:864},{sx:24,sy:96,x:912,y:864},{sx:24,sy:96,x:888,y:864},{sx:24,sy:96,x:840,y:840},{sx:24,sy:96,x:792,y:816},{sx:24,sy:96,x:792,y:792},{sx:24,sy:96,x:768,y:792},{sx:24,sy:96,x:768,y:768},{sx:24,sy:96,x:744,y:768},{sx:24,sy:96,x:744,y:744},{sx:24,sy:96,x:720,y:744},{sx:24,sy:96,x:720,y:720},{sx:24,sy:96,x:696,y:744},{sx:24,sy:96,x:720,y:768},{sx:24,sy:96,x:720,y:792},{sx:24,sy:96,x:744,y:792},{sx:24,sy:96,x:744,y:816},{sx:24,sy:96,x:768,y:816},{sx:24,sy:96,x:768,y:840},{sx:24,sy:96,x:792,y:840},{sx:24,sy:96,x:792,y:864},{sx:24,sy:96,x:816,y:864},{sx:24,sy:96,x:816,y:840},{sx:24,sy:96,x:816,y:816},{sx:24,sy:96,x:816,y:792},{sx:24,sy:96,x:816,y:768},{sx:24,sy:96,x:816,y:744},{sx:24,sy:96,x:816,y:720},{sx:24,sy:96,x:816,y:696},{sx:24,sy:96,x:816,y:672},{sx:24,sy:96,x:840,y:672},{sx:24,sy:96,x:864,y:672},{sx:24,sy:96,x:864,y:648},{sx:24,sy:96,x:888,y:648},{sx:24,sy:96,x:888,y:624},{sx:24,sy:96,x:912,y:624},{sx:24,sy:96,x:912,y:600},{sx:24,sy:96,x:936,y:600},{sx:24,sy:96,x:936,y:576},{sx:24,sy:96,x:960,y:576},{sx:24,sy:96,x:960,y:552},{sx:24,sy:96,x:984,y:552},{sx:24,sy:96,x:984,y:528},{sx:24,sy:96,x:1008,y:528},{sx:24,sy:96,x:1032,y:480},{sx:24,sy:96,x:1056,y:480},{sx:24,sy:96,x:1056,y:456},{sx:24,sy:96,x:1080,y:456},{sx:24,sy:96,x:1080,y:432},{sx:24,sy:96,x:1104,y:432},{sx:24,sy:96,x:1104,y:408},{sx:24,sy:96,x:408,y:792},{sx:24,sy:96,x:408,y:768},{sx:24,sy:96,x:408,y:744},{sx:24,sy:96,x:408,y:720},{sx:24,sy:96,x:408,y:696},{sx:24,sy:96,x:408,y:672},{sx:24,sy:96,x:408,y:648},{sx:24,sy:96,x:384,y:624},{sx:24,sy:96,x:360,y:600},{sx:24,sy:96,x:336,y:576},{sx:24,sy:96,x:312,y:552},{sx:24,sy:96,x:288,y:528},{sx:24,sy:96,x:264,y:504},{sx:24,sy:96,x:240,y:480},{sx:24,sy:96,x:216,y:456},{sx:24,sy:96,x:192,y:432},{sx:24,sy:96,x:168,y:408},{sx:24,sy:96,x:144,y:384},{sx:24,sy:96,x:120,y:384},{sx:24,sy:96,x:96,y:408},{sx:24,sy:96,x:72,y:432},{sx:24,sy:96,x:48,y:456},{sx:24,sy:96,x:24,y:480},{sx:24,sy:96,x:24,y:504},{sx:24,sy:96,x:24,y:528},{sx:24,sy:96,x:24,y:552},{sx:24,sy:96,x:24,y:576},{sx:24,sy:96,x:24,y:600},{sx:24,sy:96,x:48,y:600},{sx:24,sy:96,x:48,y:624},{sx:24,sy:96,x:72,y:624},{sx:24,sy:96,x:72,y:648},{sx:24,sy:96,x:96,y:648},{sx:24,sy:96,x:96,y:672},{sx:24,sy:96,x:120,y:672},{sx:24,sy:96,x:120,y:696},{sx:24,sy:96,x:144,y:696},{sx:24,sy:96,x:144,y:720},{sx:24,sy:96,x:168,y:720},{sx:24,sy:96,x:168,y:744},{sx:24,sy:96,x:192,y:744},{sx:24,sy:96,x:192,y:768},{sx:24,sy:96,x:216,y:768},{sx:24,sy:96,x:216,y:792},{sx:24,sy:96,x:240,y:792},{sx:24,sy:96,x:240,y:816},{sx:24,sy:96,x:264,y:816},{sx:24,sy:96,x:264,y:840},{sx:24,sy:96,x:288,y:840},{sx:24,sy:96,x:288,y:864},{sx:24,sy:96,x:312,y:864},{sx:24,sy:96,x:312,y:888},{sx:24,sy:96,x:336,y:888},{sx:24,sy:96,x:336,y:912},{sx:24,sy:96,x:360,y:912},{sx:24,sy:96,x:360,y:936},{sx:24,sy:96,x:384,y:936},{sx:24,sy:96,x:384,y:960},{sx:24,sy:96,x:408,y:960},{sx:24,sy:96,x:408,y:984},{sx:24,sy:96,x:432,y:984},{sx:24,sy:96,x:432,y:1008},{sx:24,sy:96,x:456,y:1008},{sx:24,sy:96,x:456,y:1032},{sx:24,sy:96,x:480,y:1032},{sx:24,sy:96,x:480,y:1056},{sx:24,sy:96,x:504,y:1056},{sx:24,sy:96,x:504,y:1080},{sx:24,sy:96,x:528,y:1080},{sx:24,sy:96,x:528,y:1104},{sx:24,sy:96,x:552,y:1104},{sx:24,sy:96,x:552,y:1128},{sx:24,sy:96,x:576,y:1128},{sx:24,sy:96,x:600,y:1128},{sx:24,sy:96,x:600,y:1104},{sx:24,sy:96,x:624,y:1104},{sx:24,sy:96,x:624,y:1080},{sx:24,sy:96,x:648,y:1080},{sx:24,sy:96,x:648,y:1056},{sx:24,sy:96,x:672,y:1056},{sx:24,sy:96,x:672,y:1032},{sx:24,sy:96,x:696,y:1032},{sx:24,sy:96,x:696,y:1008},{sx:24,sy:96,x:720,y:1008},{sx:24,sy:96,x:720,y:984},{sx:24,sy:96,x:744,y:984},{sx:24,sy:96,x:744,y:960},{sx:24,sy:96,x:768,y:960},{sx:24,sy:96,x:768,y:936},{sx:24,sy:96,x:792,y:936},{sx:24,sy:96,x:792,y:912},{sx:24,sy:96,x:816,y:912},{sx:24,sy:96,x:816,y:888},{sx:24,sy:96,x:840,y:888},{sx:24,sy:96,x:840,y:864},{sx:24,sy:96,x:864,y:864},{sx:24,sy:96,x:864,y:840},{sx:24,sy:96,x:888,y:840},{sx:24,sy:96,x:888,y:816},{sx:24,sy:96,x:912,y:816},{sx:24,sy:96,x:912,y:792},{sx:24,sy:96,x:936,y:792},{sx:24,sy:96,x:936,y:768},{sx:24,sy:96,x:960,y:768},{sx:24,sy:96,x:960,y:744},{sx:24,sy:96,x:984,y:744},{sx:24,sy:96,x:984,y:720},{sx:24,sy:96,x:1008,y:720},{sx:24,sy:96,x:1008,y:696},{sx:24,sy:96,x:1032,y:696},{sx:24,sy:96,x:1032,y:672},{sx:24,sy:96,x:1056,y:672},{sx:24,sy:96,x:1056,y:648},{sx:24,sy:96,x:1056,y:552},{sx:24,sy:96,x:1056,y:528},{sx:24,sy:96,x:1032,y:528},{sx:24,sy:96,x:1032,y:504},{sx:24,sy:96,x:1008,y:504},{sx:24,sy:96,x:1008,y:480},{sx:24,sy:96,x:984,y:480},{sx:24,sy:96,x:984,y:456},{sx:24,sy:96,x:960,y:456},{sx:24,sy:96,x:960,y:432},{sx:24,sy:96,x:936,y:432},{sx:24,sy:96,x:936,y:408},{sx:24,sy:96,x:912,y:408},{sx:24,sy:96,x:912,y:384},{sx:24,sy:96,x:888,y:384},{sx:24,sy:96,x:888,y:360},{sx:24,sy:96,x:864,y:360},{sx:24,sy:96,x:864,y:336},{sx:24,sy:96,x:840,y:336},{sx:24,sy:96,x:840,y:312},{sx:24,sy:96,x:816,y:312},{sx:24,sy:96,x:816,y:288},{sx:24,sy:96,x:792,y:288},{sx:24,sy:96,x:792,y:264},{sx:24,sy:96,x:768,y:264},{sx:24,sy:96,x:768,y:240},{sx:24,sy:96,x:744,y:240},{sx:24,sy:96,x:744,y:216},{sx:24,sy:96,x:720,y:216},{sx:24,sy:96,x:720,y:192},{sx:24,sy:96,x:696,y:192},{sx:24,sy:96,x:696,y:168},{sx:24,sy:96,x:672,y:168},{sx:24,sy:96,x:672,y:144},{sx:24,sy:96,x:648,y:144},{sx:24,sy:96,x:648,y:120},{sx:24,sy:96,x:624,y:120},{sx:24,sy:96,x:624,y:96},{sx:24,sy:96,x:600,y:96},{sx:24,sy:96,x:600,y:72},{sx:24,sy:96,x:576,y:72},{sx:24,sy:96,x:648,y:72},{sx:24,sy:96,x:672,y:72},{sx:24,sy:96,x:696,y:72},{sx:24,sy:96,x:720,y:72},{sx:24,sy:96,x:744,y:72},{sx:24,sy:96,x:768,y:72},{sx:24,sy:96,x:792,y:72},{sx:24,sy:96,x:816,y:72},{sx:24,sy:96,x:840,y:72},{sx:24,sy:96,x:864,y:72},{sx:24,sy:96,x:864,y:96},{sx:24,sy:96,x:888,y:96},{sx:24,sy:96,x:888,y:120},{sx:24,sy:96,x:912,y:120},{sx:24,sy:96,x:912,y:144},{sx:24,sy:96,x:936,y:144},{sx:24,sy:96,x:960,y:168},{sx:24,sy:96,x:936,y:168},{sx:24,sy:96,x:936,y:192},{sx:24,sy:96,x:912,y:192},{sx:24,sy:96,x:912,y:216},{sx:24,sy:96,x:888,y:216},{sx:24,sy:96,x:1056,y:96},{sx:24,sy:96,x:1056,y:72},{sx:24,sy:96,x:1080,y:72},{sx:24,sy:96,x:1104,y:72},{sx:24,sy:96,x:1128,y:72}];for(var x=0;x<this.game.world.width/this.size.width;x++)for(var t=0;t<this.game.world.width/this.size.height;t++)this.build(["floor_5",x*this.size.width,t*this.size.height])}return _createClass(s,[{key:"render",value:function(){for(var s=0;s<this.level.length;s++)this.draw(this.level[s])}},{key:"draw",value:function(s){s.x+this.size.width>this.game.camera.x&&s.x<this.game.camera.x+this.game.camera.width&&s.y+this.size.height>this.game.camera.y&&s.y<this.game.camera.y+this.game.camera.height&&this.game.screen.drawImage(this.image,s.sx,s.sy,this.size.width,this.size.height,s.x-this.game.camera.x,s.y-this.game.camera.y,this.size.width,this.size.height)}},{key:"build",value:function(s){var y={sx:null,sy:null,x:s[1],y:s[2]};switch(s[0]){case"floor_1":y.sx=0,y.sy=72;break;case"floor_2":y.sx=24,y.sy=72;break;case"floor_3":y.sx=48,y.sy=72;break;case"floor_4":y.sx=0,y.sy=96;break;case"floor_5":y.sx=24,y.sy=96;break;case"floor_6":y.sx=48,y.sy=96;break;case"floor_7":y.sx=0,y.sy=120;break;case"floor_8":y.sx=24,y.sy=120;break;case"floor_9":y.sx=48,y.sy=120}this.cleaned=!1,this.level.push(y)}},{key:"clean",value:function(){if(!this.cleaned){for(var s,y=0;y<this.level.length;y++){s=this.level[y];for(var x,t=0;t<this.level.length;t++)if(x=this.level[t],s!=x&&s.x===x.x&&s.y===x.y){this.level.splice(y,1),y--;break}}this.cleaned=!0}}}]),s}();